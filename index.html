<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine? üíô</title>
    <link href="https://fonts.googleapis.com/css2?family=Covered+By+Your+Grace&family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --coral: #FF6B9D;
            --ocean-deep: #0A4D68;
            --ocean-light: #088395;
            --sand: #FFE5B4;
            --sunset: #FF9A76;
            --shell: #FFF5E4;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(180deg, #0A4D68 0%, #088395 50%, #FFE5B4 100%);
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            /* Center vertically */
            justify-content: center;
            align-items: center; 
        }

        /* üéµ Music Button */
        #musicBtn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        #musicBtn:hover {
            transform: scale(1.1);
            background: white;
        }

        .music-spinning {
            animation: spin 3s linear infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Floating hearts animation */
        .heart-float {
            position: fixed;
            font-size: 20px;
            opacity: 0;
            animation: float-up 8s infinite ease-in;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float-up {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        /* Wave animations */
        .waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            pointer-events: none;
            z-index: 0;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background-repeat: repeat-x;
            animation: wave-animation 20s linear infinite;
            opacity: 0.3;
        }

        .wave:nth-child(2) {
            animation: wave-animation 15s linear infinite reverse;
            opacity: 0.2;
        }

        @keyframes wave-animation {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Main container */
        .container {
            position: relative;
            z-index: 10;
            max-width: 900px;
            width: 100%;
            padding: 20px;
        }

        /* Decorative shells */
        .shell-decoration {
            position: absolute;
            font-size: 60px;
            opacity: 0.15;
            animation: gentle-float 6s ease-in-out infinite;
            pointer-events: none;
        }

        .shell-1 { top: 10%; left: 5%; animation-delay: 0s; }
        .shell-2 { top: 30%; right: 8%; animation-delay: 2s; }
        .shell-3 { bottom: 20%; left: 10%; animation-delay: 4s; }

        @keyframes gentle-float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* Main card */
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 50px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative; /* Essential for containing the button */
            overflow: hidden; /* Ensures nothing spills out visually */
            animation: card-entrance 1s ease-out;
            backdrop-filter: blur(10px);
        }

        @keyframes card-entrance {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Typography */
        .handwritten {
            font-family: 'Covered By Your Grace', cursive;
            font-size: 32px;
            color: var(--ocean-deep);
            margin-bottom: 20px;
        }

        .main-heading {
            font-family: 'Playfair Display', serif;
            font-size: clamp(36px, 8vw, 56px);
            font-weight: 700;
            color: var(--coral);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .location {
            font-size: clamp(20px, 4vw, 24px);
            color: var(--ocean-deep);
            margin-bottom: 10px;
            font-weight: 400;
        }

        /* ‚è≥ Countdown Styles */
        #countdown {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--ocean-light);
            font-size: 18px;
            background: rgba(8, 131, 149, 0.1);
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(8, 131, 149, 0.2);
        }

        .message {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Answer buttons */
        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            position: static; /* Important: allow buttons to flow naturally initially */
            min-height: 80px;
            margin-bottom: 40px;
        }

        .btn {
            padding: 16px 40px;
            font-size: 18px;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 10; /* High z-index to sit on top of everything */
        }

        .btn-yes {
            background: linear-gradient(135deg, var(--coral) 0%, var(--sunset) 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(255, 107, 157, 0.4);
        }

        .btn-yes:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(255, 107, 157, 0.6);
        }

        .btn-no {
            background: white;
            color: var(--ocean-deep);
            border: 2px solid var(--ocean-deep);
            /* Transition specifically for the movement */
            transition: top 0.3s ease, left 0.3s ease, background-color 0.3s; 
        }

        /* Memory Capsule */
        .memories-container {
            width: 100%;
            display: flex;
            justify-content: center;
            padding-top: 20px;
            border-top: 1px dashed rgba(0,0,0,0.1);
            position: relative;
            z-index: 5;
        }

        .memory-capsule {
            display: flex;
            align-items: center;
            background: white;
            padding: 12px 20px;
            border-radius: 20px;
            text-decoration: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid #f0f0f0;
            max-width: 350px;
            width: 100%;
        }

        .memory-capsule:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 107, 157, 0.25);
            border-color: var(--coral);
        }

        .capsule-icon-wrapper {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--shell) 0%, #fff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            margin-right: 15px;
        }

        .capsule-icon {
            display: block;
            animation: camera-bounce 2s infinite ease-in-out;
        }

        @keyframes camera-bounce {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(-10deg) scale(1.1); }
        }

        .capsule-text {
            flex: 1;
            text-align: left;
        }

        .capsule-title {
            display: block;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 16px;
            color: var(--ocean-deep);
        }

        .capsule-subtitle {
            display: block;
            font-size: 12px;
            color: #888;
            margin-top: 2px;
        }

        .capsule-arrow {
            color: var(--coral);
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .memory-capsule:hover .capsule-arrow { transform: translateX(5px); }

        /* Responsive */
        @media (max-width: 768px) {
            .card { padding: 40px 20px; min-height: 600px; /* Ensure height for button to move */ }
            .btn { width: auto; margin-bottom: 10px; }
            .buttons { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>

    <button id="musicBtn" onclick="toggleMusic()">üîá</button>
    <audio id="bgMusic" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3" type="audio/mp3">
    </audio>

    <div class="heart-float" style="left: 10%; animation-delay: 0s;">üíô</div>
    <div class="heart-float" style="left: 30%; animation-delay: 2s;">‚ù§Ô∏è</div>
    <div class="heart-float" style="left: 50%; animation-delay: 4s;">üíñ</div>
    <div class="heart-float" style="left: 70%; animation-delay: 6s;">üíô</div>
    <div class="heart-float" style="left: 90%; animation-delay: 1s;">üíï</div>

    <div class="waves">
        <svg class="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 100" preserveAspectRatio="none">
            <path d="M0,50 C150,80 350,20 600,50 C850,80 1050,20 1200,50 L1200,100 L0,100 Z" fill="rgba(255, 255, 255, 0.3)"/>
        </svg>
        <svg class="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 100" preserveAspectRatio="none">
            <path d="M0,30 C200,60 400,0 600,30 C800,60 1000,0 1200,30 L1200,100 L0,100 Z" fill="rgba(255, 255, 255, 0.2)"/>
        </svg>
    </div>

    <div class="shell-decoration shell-1">üêö</div>
    <div class="shell-decoration shell-2">üå∫</div>
    <div class="shell-decoration shell-3">üêö</div>

    <div class="container" id="tiltContainer">
        <div class="card">
            
            <p class="handwritten">Hey Loomi... ‚ú®</p>
            
            <h1 class="main-heading">
                Will You Be<br>My Valentine?
            </h1>

            <p class="location">
                üå¥ Moalboal, Cebu üåä
            </p>

            <div id="countdown">Loading timer...</div>

            <p class="message">
                I want to spend the most romantic day of the year with you,
                exploring the beautiful beaches and creating memories together.
                Let's watch the sunset, walk by the ocean, and celebrate our love
                in paradise. üíô
            </p>

            <div class="buttons">
                <button class="btn btn-yes" id="yesBtn" onclick="handleYes()">
                    Yes! üíñ
                </button>
                <button class="btn btn-no" id="noBtn" onmouseover="moveButton()" onclick="moveButton()">
                    No üò¢
                </button>
            </div>

            <div class="memories-container">
                <a href="photos.html" class="memory-capsule">
                    <div class="capsule-icon-wrapper">
                        <span class="capsule-icon">üì∏</span>
                    </div>
                    <div class="capsule-text">
                        <span class="capsule-title">My Favorites with You</span>
                        <span class="capsule-subtitle">Tap to view our gallery</span>
                    </div>
                    <div class="capsule-arrow">‚ûú</div>
                </a>
            </div>

        </div>
    </div>

    <script>
        // ---------------------------------------------------------
        // üéµ MUSIC PLAYER FIXED
        // ---------------------------------------------------------
        const music = document.getElementById('bgMusic');
        const btn = document.getElementById('musicBtn');
        
        function toggleMusic() {
            if (music.paused) {
                // Try to play
                const playPromise = music.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        // Playback started successfully
                        btn.innerHTML = 'üéµ';
                        btn.classList.add('music-spinning');
                    }).catch(error => {
                        console.log("Playback prevented by browser: " + error);
                        alert("Please click the page once first to enable audio!");
                    });
                }
            } else {
                music.pause();
                btn.innerHTML = 'üîá';
                btn.classList.remove('music-spinning');
            }
        }

        // Set volume reasonably low
        music.volume = 0.5;

        // ---------------------------------------------------------
        // ‚è≥ COUNTDOWN TIMER
        // ---------------------------------------------------------
        const targetDate = new Date('February 14, 2026 00:00:00').getTime();

        const timerInterval = setInterval(function() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance < 0) {
                clearInterval(timerInterval);
                document.getElementById("countdown").innerHTML = "It's Our Date! üíñ";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

            document.getElementById("countdown").innerHTML = 
                `‚è≥ ${days}d ${hours}h ${minutes}m until`;
        }, 1000);

        // ---------------------------------------------------------
        // üèÉ‚Äç‚ôÇÔ∏è FIXED: BUTTON TRAP & GROWING YES
        // ---------------------------------------------------------
        let noClickCount = 0;
        let yesScale = 1;

        function moveButton() {
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            const card = document.querySelector('.card');
            
            // 1. Make Yes button bigger (Limit growth so it doesn't break layout)
            if (yesScale < 3) {
                yesScale += 0.2; 
                yesBtn.style.transform = `scale(${yesScale})`;
            }
            
            // 2. Calculate boundaries INSIDE the card
            // We get the width/height of the card
            const cardRect = card.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            
            // Subtract button size and padding from card dimensions
            // We use clientWidth/Height to get inner dimensions excluding borders
            const maxX = card.clientWidth - noBtn.offsetWidth - 40; // 40px padding buffer
            const maxY = card.clientHeight - noBtn.offsetHeight - 40;
            
            const randomX = Math.floor(Math.random() * maxX);
            const randomY = Math.floor(Math.random() * maxY);
            
            // 3. Apply position
            // Important: Position absolute is relative to the nearest positioned ancestor (.card)
            noBtn.style.position = 'absolute';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            
            // 4. Change Text
            noClickCount++;
            const phrases = [
                'No üò¢',
                'Are you sure? ü•∫', 
                'Really? üò¢', 
                'Think again! üòñ', 
                'Last chance! üò≠', 
                'Please? üôè',
                "Sike! You can't say no! üòú"
            ];
            
            noBtn.innerText = phrases[Math.min(noClickCount, phrases.length - 1)];
        }

        function handleYes() {
            window.location.href = 'thankyou.html';
        }

        // ---------------------------------------------------------
        // üéä CONFETTI
        // ---------------------------------------------------------
        function createConfettiHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart-float';
            heart.textContent = ['üíñ', 'üíï', 'üíô', '‚ù§Ô∏è', 'üíó'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
            heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 8000);
        }

        setInterval(() => {
            if (Math.random() > 0.7) createConfettiHeart();
        }, 2000);

    </script>
</body>
</html>
